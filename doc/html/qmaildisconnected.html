<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- qmaildisconnected.cpp -->
<head>
  <title>QMailDisconnected Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a></td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">QMailDisconnected Class Reference</h1>
<p>The QMailDisconnected class provides functions to work with external servers using the disconnected mode of operation. <a href="#details">More...</a></p>
<pre>    #include &lt;QMailDisconnected&gt;</pre><p><b>This class is under development and is subject to change.</b></p>
<ul>
<li><a href="qmaildisconnected-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="static-public-members"></a>
<h2>Static Public Members</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#clearPreviousFolder">clearPreviousFolder</a></b> ( QMailMessageMetaData * <i>message</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#copyPreviousFolder">copyPreviousFolder</a></b> ( const QMailMessageMetaData &amp; <i>source</i>, QMailMessageMetaData * <i>dest</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#copyToFolder">copyToFolder</a></b> ( const QMailMessageIdList &amp; <i>ids</i>, const QMailFolderId &amp; <i>folderId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#copyToStandardFolder">copyToStandardFolder</a></b> ( const QMailMessageIdList &amp; <i>ids</i>, QMailFolder::StandardFolder <i>standardFolder</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailMessageKey </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#destinationKey">destinationKey</a></b> ( const QMailFolderId &amp; <i>folderId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#flagMessage">flagMessage</a></b> ( const QMailMessageId &amp; <i>id</i>, quint64 <i>setMask</i>, quint64 <i>unsetMask</i>, const QString &amp; <i>description</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#flagMessages">flagMessages</a></b> ( const QMailMessageIdList &amp; <i>ids</i>, quint64 <i>setMask</i>, quint64 <i>unsetMask</i>, const QString &amp; <i>description</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#moveToFolder">moveToFolder</a></b> ( const QMailMessageIdList &amp; <i>ids</i>, const QMailFolderId &amp; <i>folderId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#moveToFolder-2">moveToFolder</a></b> ( QMailMessageMetaData * <i>message</i>, const QMailFolderId &amp; <i>folderId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#moveToStandardFolder">moveToStandardFolder</a></b> ( const QMailMessageIdList &amp; <i>ids</i>, QMailFolder::StandardFolder <i>standardFolder</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailMessageKey::Properties </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#parentFolderProperties">parentFolderProperties</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMap&lt;QMailFolderId, QMailMessageIdList&gt; </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#restoreMap">restoreMap</a></b> ( const QMailMessageIdList &amp; <i>messageIds</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#restoreToPreviousFolder">restoreToPreviousFolder</a></b> ( const QMailMessageId &amp; <i>id</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#restoreToPreviousFolder-2">restoreToPreviousFolder</a></b> ( const QMailMessageKey &amp; <i>key</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#rollBackUpdates">rollBackUpdates</a></b> ( const QMailAccountId &amp; <i>mailAccountId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailFolderId </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#sourceFolderId">sourceFolderId</a></b> ( const QMailMessageMetaData &amp; <i>metaData</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailMessageKey </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#sourceKey">sourceKey</a></b> ( const QMailFolderId &amp; <i>folderId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmaildisconnected.html#updatesOutstanding">updatesOutstanding</a></b> ( const QMailAccountId &amp; <i>mailAccountId</i> )</td></tr>
</table>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QMailDisconnected class provides functions to work with external servers using the disconnected mode of operation.</p>
<p>Functions are provided such as <a href="qmaildisconnected.html#moveToFolder">moveToFolder</a>() and <a href="qmaildisconnected.html#flagMessage">flagMessage</a>() to update the state of the mail store without requiring that the update be immediately propagated to any external servers affected by that update. A function <a href="qmaildisconnected.html#rollBackUpdates">rollBackUpdates</a>() is provided to allow clients to roll back changes that have been applied to the mail store but not yet synchronized with an external server.</p>
<p>QMailDisconnected also provides functions such as <a href="qmaildisconnected.html#sourceKey">sourceKey</a>() and <a href="qmaildisconnected.html#sourceFolderId">sourceFolderId</a>() to query the state of a folder or message as it was at the time of the last synchronization with the external server associated with the folder or message.</p>
<p>Additionally QMailDisconnected provides functions to work with messages containing disconnected state such as <a href="qmaildisconnected.html#clearPreviousFolder">clearPreviousFolder</a>(), <a href="qmaildisconnected.html#copyPreviousFolder">copyPreviousFolder</a>() and <a href="qmaildisconnected.html#restoreMap">restoreMap</a>().</p>
<p>Finally pending disconnected operations may be propagaged to an external server, that is synchronized with an external server using <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="clearPreviousFolder"></a>void QMailDisconnected::clearPreviousFolder ( <a href="qmailmessagemetadata.html">QMailMessageMetaData</a> * <i>message</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Clears all data related to the disconnected state of the <i>message</i>.</p>
<h3 class="fn"><a name="copyPreviousFolder"></a>void QMailDisconnected::copyPreviousFolder ( const <a href="qmailmessagemetadata.html">QMailMessageMetaData</a> &amp; <i>source</i>, <a href="qmailmessagemetadata.html">QMailMessageMetaData</a> * <i>dest</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Copies all message data related to disconnected state from <i>source</i> into <i>dest</i>.</p>
<h3 class="fn"><a name="copyToFolder"></a>void QMailDisconnected::copyToFolder ( const <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a> &amp; <i>ids</i>, const <a href="qmailfolderid.html">QMailFolderId</a> &amp; <i>folderId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected copies the list of messages identified by <i>ids</i> into the folder identified by <i>folderId</i>, setting standard folder flags as appropriate.</p>
<p>The copy operation will be propagated to the server by a successful call to <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<p>This function must only be used on messages for which the entire content of the message and all parts of the message is available in the message store; otherwise the behavior is undefined.</p>
<p>See also <a href="qmailmessagepartcontainer.html#contentAvailable">QMailMessagePartContainer::contentAvailable</a>().</p>
<h3 class="fn"><a name="copyToStandardFolder"></a>void QMailDisconnected::copyToStandardFolder ( const <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a> &amp; <i>ids</i>, <a href="qmailfolder.html#StandardFolder-enum">QMailFolder::StandardFolder</a> <i>standardFolder</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected copies the list of messages identified by <i>ids</i> into the standard folder <i>standardFolder</i>, setting standard folder flags as appropriate.</p>
<p>The copy operation will be propagated to the server by a successful call to <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<p>This function must only be used on messages for which the entire content of the message and all parts of the message is available in the message store; otherwise the behavior is undefined.</p>
<p>See also <a href="qmailmessagepartcontainer.html#contentAvailable">QMailMessagePartContainer::contentAvailable</a>().</p>
<h3 class="fn"><a name="destinationKey"></a><a href="qmailmessagekey.html">QMailMessageKey</a> QMailDisconnected::destinationKey ( const <a href="qmailfolderid.html">QMailFolderId</a> &amp; <i>folderId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Returns a key matching messages that are scheduled to be moved into the folder identified by <i>folderId</i>, when the next synchronization of the account containing that folder occurs.</p>
<p>See also <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<h3 class="fn"><a name="flagMessage"></a>void QMailDisconnected::flagMessage ( const <a href="qmailmessageid.html">QMailMessageId</a> &amp; <i>id</i>, <a href="http://doc.trolltech.com/4.5/qtglobal.html#quint64-typedef">quint64</a> <i>setMask</i>, <a href="http://doc.trolltech.com/4.5/qtglobal.html#quint64-typedef">quint64</a> <i>unsetMask</i>, const <a href="http://doc.trolltech.com/4.5/qstring.html">QString</a> &amp; <i>description</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected flags the list a message identified by <i>id</i>, setting the flags specified by the bit mask <i>setMask</i> to on and setting the flags set by the bit mask <i>unsetMask</i> to off.</p>
<p>For example this function may be used to mark a message as important.</p>
<p>The flagging operation will be propagated to the server by a successful call to <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<p>During synchronization with the server a status message with contents <i>description</i> may be emitted.</p>
<h3 class="fn"><a name="flagMessages"></a>void QMailDisconnected::flagMessages ( const <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a> &amp; <i>ids</i>, <a href="http://doc.trolltech.com/4.5/qtglobal.html#quint64-typedef">quint64</a> <i>setMask</i>, <a href="http://doc.trolltech.com/4.5/qtglobal.html#quint64-typedef">quint64</a> <i>unsetMask</i>, const <a href="http://doc.trolltech.com/4.5/qstring.html">QString</a> &amp; <i>description</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected flags the list of messages identified by <i>ids</i>, setting the flags specified by the bit mask <i>setMask</i> to on and setting the flags set by the bit mask <i>unsetMask</i> to off.</p>
<p>For example this function may be used to mark messages as important.</p>
<p>The flagging operation will be propagated to the server by a successful call to <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<p>During synchronization with the server a status message with contents <i>description</i> may be emitted.</p>
<h3 class="fn"><a name="moveToFolder"></a>void QMailDisconnected::moveToFolder ( const <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a> &amp; <i>ids</i>, const <a href="qmailfolderid.html">QMailFolderId</a> &amp; <i>folderId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected moves the list of messages identified by <i>ids</i> into the folder identified by <i>folderId</i>, setting standard folder flags as appropriate.</p>
<p>Moving to another account is not supported.</p>
<p>The move operation will be propagated to the server by a successful call to <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<h3 class="fn"><a name="moveToFolder-2"></a>void QMailDisconnected::moveToFolder ( <a href="qmailmessagemetadata.html">QMailMessageMetaData</a> * <i>message</i>, const <a href="qmailfolderid.html">QMailFolderId</a> &amp; <i>folderId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected updates <i>message</i> to be moved to the folder identified <i>folderId</i>. This function does NOT update the message in <a href="qmailstore.html">QMailStore</a>, <a href="qmailstore.html#updateMessage">QMailStore::updateMessage</a>() should be used to ensure that changes are to propagated to the server.</p>
<p>Moving to another account is not supported.</p>
<h3 class="fn"><a name="moveToStandardFolder"></a>void QMailDisconnected::moveToStandardFolder ( const <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a> &amp; <i>ids</i>, <a href="qmailfolder.html#StandardFolder-enum">QMailFolder::StandardFolder</a> <i>standardFolder</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Disconnected moves the list of messages identified by <i>ids</i> into the standard folder <i>standardFolder</i>, setting standard folder flags as appropriate.</p>
<p>The move operation will be propagated to the server by a successful call to <a href="qmailretrievalaction.html#exportUpdates">QMailRetrievalAction::exportUpdates</a>().</p>
<h3 class="fn"><a name="parentFolderProperties"></a><a href="qmailmessagekey.html#Property-enum">QMailMessageKey::Properties</a> QMailDisconnected::parentFolderProperties ()&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Returns a bit mask matching all <a href="qmailmessagekey.html">QMailMessageKey</a> properties related to disconnected state.</p>
<h3 class="fn"><a name="restoreMap"></a><a href="http://doc.trolltech.com/4.5/qmap.html">QMap</a>&lt;<a href="qmailfolderid.html">QMailFolderId</a>, <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a>&gt; QMailDisconnected::restoreMap ( const <a href="qmailmessageid.html#QMailMessageIdList-typedef">QMailMessageIdList</a> &amp; <i>messageIds</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Returns a map of originating folders for a list of messages that are in the disconnected moved state as identified by <i>messageIds</i>.</p>
<p>The map contains a key for each originating folder, and for each key the value is a list of messages moved out of the folder.</p>
<h3 class="fn"><a name="restoreToPreviousFolder"></a>void QMailDisconnected::restoreToPreviousFolder ( const <a href="qmailmessageid.html">QMailMessageId</a> &amp; <i>id</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Updates the <a href="qmailmessage.html">QMailMessage</a> with <a href="qmailmessageid.html">QMailMessageId</a> <i>id</i> to move the message back to the previous folder it was contained by.</p>
<p>Returns <tt>true</tt> if the operation completed successfully, <tt>false</tt> otherwise.</p>
<p>See also <a href="qmaildisconnected.html#moveToFolder">QMailDisconnected::moveToFolder</a>() and <a href="qmaildisconnected.html#moveToStandardFolder">QMailDisconnected::moveToStandardFolder</a>().</p>
<h3 class="fn"><a name="restoreToPreviousFolder-2"></a>void QMailDisconnected::restoreToPreviousFolder ( const <a href="qmailmessagekey.html">QMailMessageKey</a> &amp; <i>key</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Updates all QMailMessages identified by the key <i>key</i> to move the messages back to the previous folder they were contained by.</p>
<h3 class="fn"><a name="rollBackUpdates"></a>void QMailDisconnected::rollBackUpdates ( const <a href="qmailaccountid.html">QMailAccountId</a> &amp; <i>mailAccountId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Rolls back all disconnected move and copy operations that have been applied to the message store since the most recent synchronization of the message with the account specified by <i>mailAccountId</i>.</p>
<p>See also <a href="qmaildisconnected.html#updatesOutstanding">updatesOutstanding</a>().</p>
<h3 class="fn"><a name="sourceFolderId"></a><a href="qmailfolderid.html">QMailFolderId</a> QMailDisconnected::sourceFolderId ( const <a href="qmailmessagemetadata.html">QMailMessageMetaData</a> &amp; <i>metaData</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Return the <a href="qmailfolderid.html">QMailFolderId</a> of the folder that contained the message <i>metaData</i> at the time the most recent synchronization of the message with the originating external server occurred.</p>
<p>See also <a href="qmailmessagemetadata.html#parentFolderId">QMailMessageMetaData::parentFolderId</a>().</p>
<h3 class="fn"><a name="sourceKey"></a><a href="qmailmessagekey.html">QMailMessageKey</a> QMailDisconnected::sourceKey ( const <a href="qmailfolderid.html">QMailFolderId</a> &amp; <i>folderId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Returns a key matching messages whose parent folder's identifier was equal to <i>folderId</i>, at the time the most recent synchronization of the message with the originating external server occurred.</p>
<p>See also <a href="qmailmessagekey.html#parentFolderId">QMailMessageKey::parentFolderId</a>().</p>
<h3 class="fn"><a name="updatesOutstanding"></a>bool QMailDisconnected::updatesOutstanding ( const <a href="qmailaccountid.html">QMailAccountId</a> &amp; <i>mailAccountId</i> )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Returns true if disconnected operations have been applied to the message store since the most recent synchronization with the account specified by <i>mailAccountId</i>.</p>
<p>Otherwise returns false.</p>
<p>See also <a href="qmaildisconnected.html#rollBackUpdates">rollBackUpdates</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2010 QtSoftware</td>
<td align="right"><div align="right">Messaging Framework</div></td>
</tr></table></div></address></body>
</html>
