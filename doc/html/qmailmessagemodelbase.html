<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- qmailmessagemodelbase.cpp -->
<head>
  <title>QMailMessageModelBase Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a></td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">QMailMessageModelBase Class Reference</h1>
<p>The QMailMessageModelBase class provides an interface to a model containing messages. <a href="#details">More...</a></p>
<pre>    #include &lt;QMailMessageModelBase&gt;</pre><p><b>This class is under development and is subject to change.</b></p>
<p>Inherits <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html">QAbstractItemModel</a>.</p>
<p>Inherited by <a href="qmailmessagelistmodel.html">QMailMessageListModel</a> and <a href="qmailmessagethreadedmodel.html">QMailMessageThreadedModel</a>.</p>
<ul>
<li><a href="qmailmessagemodelbase-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#Roles-enum">Roles</a></b> { MessageAddressTextRole, MessageSubjectTextRole, MessageFilterTextRole, MessageTimeStampTextRole, ..., MessageIdRole }</td></tr>
</table>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#QMailMessageModelBase">QMailMessageModelBase</a></b> ( QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailMessageId </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#idFromIndex">idFromIndex</a></b> ( const QModelIndex &amp; <i>index</i> ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#ignoreMailStoreUpdates">ignoreMailStoreUpdates</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QModelIndex </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#indexFromId">indexFromId</a></b> ( const QMailMessageId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#isEmpty">isEmpty</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailMessageKey </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#key">key</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#setIgnoreMailStoreUpdates">setIgnoreMailStoreUpdates</a></b> ( bool <i>ignore</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#setKey">setKey</a></b> ( const QMailMessageKey &amp; <i>key</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#setSortKey">setSortKey</a></b> ( const QMailMessageSortKey &amp; <i>sortKey</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMailMessageSortKey </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#sortKey">sortKey</a></b> () const</td></tr>
</table>
<hr />
<a name="reimplemented-public-functions"></a>
<h2>Reimplemented Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">virtual int </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#columnCount">columnCount</a></b> ( const QModelIndex &amp; <i>index</i> = QModelIndex() ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual QVariant </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#data">data</a></b> ( const QModelIndex &amp; <i>index</i>, int <i>role</i> = Qt::DisplayRole ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual int </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#rowCount">rowCount</a></b> ( const QModelIndex &amp; <i>index</i> = QModelIndex() ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual bool </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#setData">setData</a></b> ( const QModelIndex &amp; <i>index</i>, const QVariant &amp; <i>value</i>, int <i>role</i> = Qt::EditRole )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>34 public functions inherited from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#public-functions">QAbstractItemModel</a></li>
<li><div bar="2" class="fn"></div>29 public functions inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#public-functions">QObject</a></li>
</ul>
<hr />
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmailmessagemodelbase.html#modelChanged">modelChanged</a></b> ()</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>14 signals inherited from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#signals">QAbstractItemModel</a></li>
<li><div bar="2" class="fn"></div>1 signal inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"></div>1 property inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#properties">QObject</a></li>
<li><div class="fn"></div>2 public slots inherited from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#public-slots">QAbstractItemModel</a></li>
<li><div class="fn"></div>1 public slot inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#public-slots">QObject</a></li>
<li><div class="fn"></div>1 public type inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#public-variables">QObject</a></li>
<li><div class="fn"></div>4 static public members inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"></div>14 protected functions inherited from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#protected-functions">QAbstractItemModel</a></li>
<li><div class="fn"></div>7 protected functions inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"></div>2 protected variables inherited from <a href="http://doc.trolltech.com/4.5/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QMailMessageModelBase class provides an interface to a model containing messages.</p>
<p>The QMailMessageModelBase presents a model of all the messages currently stored in the message store. By using the <a href="qmailmessagemodelbase.html#setKey">setKey</a>() and <a href="qmailmessagemodelbase.html#sortKey">sortKey</a>() functions it is possible to have the model represent specific user-filtered subsets of messages, sorted in a particular order.</p>
<p>The QMailMessageModelBase is a descendant of <a href="http://doc.trolltech.com/4.5/qabstractlistmodel.html">QAbstractListModel</a>, so it is suitable for use with the Qt View classes such as <a href="http://doc.trolltech.com/4.5/qlistview.html">QListView</a> and <a href="http://doc.trolltech.com/4.5/qtreeview.html">QTreeView</a> to visually present groups of messages.</p>
<p>The model listens for changes reported by the <a href="qmailstore.html">QMailStore</a>, and automatically synchronizes its content with that of the store. This behaviour can be optionally or temporarily disabled by calling the <a href="qmailmessagemodelbase.html#setIgnoreMailStoreUpdates">setIgnoreMailStoreUpdates</a>() function.</p>
<p>Messages can be extracted from the view with the <a href="qmailmessagemodelbase.html#idFromIndex">idFromIndex</a>() function and the resultant id can be used to load a message from the store.</p>
<p>For filters or sorting not provided by the QMailMessageModelBase it is recommended that <a href="http://doc.trolltech.com/4.5/qsortfilterproxymodel.html">QSortFilterProxyModel</a> is used to wrap the model to provide custom sorting and filtering.</p>
<p>See also <a href="qmailmessage.html">QMailMessage</a> and <a href="http://doc.trolltech.com/4.5/qsortfilterproxymodel.html">QSortFilterProxyModel</a>.</p>
<hr />
<h2>Member Type Documentation</h2>
<h3 class="fn"><a name="Roles-enum"></a>enum QMailMessageModelBase::Roles</h3>
<p>Represents common display roles of a message. These roles are used to display common message elements in a view and its attached delegates.</p>
<p><table class="valuelist" border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageAddressTextRole</tt></td><td align="center" valign="top"><tt>Qt::UserRole</tt></td><td valign="top">The address text of a message. This a can represent a name if the address is tied to a contact in the addressbook and represents either the incoming or outgoing address depending on the message direction.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageSubjectTextRole</tt></td><td align="center" valign="top">?</td><td valign="top">The subject of a message. For-non email messages this may represent the body text of a message.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageFilterTextRole</tt></td><td align="center" valign="top">?</td><td valign="top">The MessageAddressTextRole concatenated with the MessageSubjectTextRole. This can be used by filtering classes to filter messages based on the text of these commonly displayed roles.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageTimeStampTextRole</tt></td><td align="center" valign="top">?</td><td valign="top">The timestamp of a message. &quot;Received&quot; or &quot;Sent&quot; is prepended to the timestamp string depending on the message direction.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageSizeTextRole</tt></td><td align="center" valign="top">?</td><td valign="top">The size of a message, formatted as text.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageTypeIconRole</tt></td><td align="center" valign="top">?</td><td valign="top">A string that can be passed to <a href="http://doc.trolltech.com/4.5/qicon.html">QIcon</a> representing the type of the message.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageStatusIconRole</tt></td><td align="center" valign="top">?</td><td valign="top">A string that can be passed to <a href="http://doc.trolltech.com/4.5/qicon.html">QIcon</a> representing the status of the message. e.g Read, Unread, Downloaded</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageDirectionIconRole</tt></td><td align="center" valign="top">?</td><td valign="top">A string that can be passed to <a href="http://doc.trolltech.com/4.5/qicon.html">QIcon</a> representing the incoming or outgoing direction of a message.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessagePresenceIconRole</tt></td><td align="center" valign="top">?</td><td valign="top">A string that can be passed to <a href="http://doc.trolltech.com/4.5/qicon.html">QIcon</a> representing the presence status of the contact associated with the MessageAddressTextRole.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageBodyTextRole</tt></td><td align="center" valign="top">?</td><td valign="top">The body of a message represented as text.</td></tr>
<tr><td valign="top"><tt>QMailMessageModelBase::MessageIdRole</tt></td><td align="center" valign="top">?</td><td valign="top">The <a href="qmailmessageid.html">QMailMessageId</a> value identifying the message.</td></tr>
</table></p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QMailMessageModelBase"></a>QMailMessageModelBase::QMailMessageModelBase ( <a href="http://doc.trolltech.com/4.5/qobject.html">QObject</a> * <i>parent</i> = 0 )</h3>
<p>Constructs a <a href="qmailmessagemodelbase.html">QMailMessageModelBase</a> with the parent <i>parent</i>.</p>
<h3 class="fn"><a name="columnCount"></a>int QMailMessageModelBase::columnCount ( const <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> &amp; <i>index</i> = QModelIndex() ) const&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Reimplemented from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#columnCount">QAbstractItemModel::columnCount</a>().</p>
<h3 class="fn"><a name="data"></a><a href="http://doc.trolltech.com/4.5/qvariant.html">QVariant</a> QMailMessageModelBase::data ( const <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> &amp; <i>index</i>, int <i>role</i> = Qt::DisplayRole ) const&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Reimplemented from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#data">QAbstractItemModel::data</a>().</p>
<p>See also <a href="qmailmessagemodelbase.html#setData">setData</a>().</p>
<h3 class="fn"><a name="idFromIndex"></a><a href="qmailmessageid.html">QMailMessageId</a> QMailMessageModelBase::idFromIndex ( const <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> &amp; <i>index</i> ) const</h3>
<p>Returns the <a href="qmailmessageid.html">QMailMessageId</a> of the message represented by the <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> <i>index</i>. If the index is not valid an invalid <a href="qmailmessageid.html">QMailMessageId</a> is returned.</p>
<h3 class="fn"><a name="ignoreMailStoreUpdates"></a>bool QMailMessageModelBase::ignoreMailStoreUpdates () const</h3>
<p>Returns true if the model has been set to ignore updates emitted by the mail store; otherwise returns false.</p>
<p>See also <a href="qmailmessagemodelbase.html#setIgnoreMailStoreUpdates">setIgnoreMailStoreUpdates</a>().</p>
<h3 class="fn"><a name="indexFromId"></a><a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> QMailMessageModelBase::indexFromId ( const <a href="qmailmessageid.html">QMailMessageId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> that represents the message with <a href="qmailmessageid.html">QMailMessageId</a> <i>id</i>. If the id is not contained in this model, an invalid <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> is returned.</p>
<h3 class="fn"><a name="isEmpty"></a>bool QMailMessageModelBase::isEmpty () const</h3>
<p>Returns true if the model contains no messages.</p>
<h3 class="fn"><a name="key"></a><a href="qmailmessagekey.html">QMailMessageKey</a> QMailMessageModelBase::key () const</h3>
<p>Returns the <a href="qmailmessagekey.html">QMailMessageKey</a> used to populate the contents of this model.</p>
<p>See also <a href="qmailmessagemodelbase.html#setKey">setKey</a>().</p>
<h3 class="fn"><a name="modelChanged"></a>void QMailMessageModelBase::modelChanged ()&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when the content or ordering of the model is reset.</p>
<h3 class="fn"><a name="rowCount"></a>int QMailMessageModelBase::rowCount ( const <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> &amp; <i>index</i> = QModelIndex() ) const&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Reimplemented from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#rowCount">QAbstractItemModel::rowCount</a>().</p>
<h3 class="fn"><a name="setData"></a>bool QMailMessageModelBase::setData ( const <a href="http://doc.trolltech.com/4.5/qmodelindex.html">QModelIndex</a> &amp; <i>index</i>, const <a href="http://doc.trolltech.com/4.5/qvariant.html">QVariant</a> &amp; <i>value</i>, int <i>role</i> = Qt::EditRole )&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Reimplemented from <a href="http://doc.trolltech.com/4.5/qabstractitemmodel.html#setData">QAbstractItemModel::setData</a>().</p>
<p>See also <a href="qmailmessagemodelbase.html#data">data</a>().</p>
<h3 class="fn"><a name="setIgnoreMailStoreUpdates"></a>void QMailMessageModelBase::setIgnoreMailStoreUpdates ( bool <i>ignore</i> )</h3>
<p>Sets whether or not mail store updates are ignored to <i>ignore</i>.</p>
<p>If ignoring updates is set to true, the model will ignore updates reported by the mail store. If set to false, the model will automatically synchronize its content in reaction to updates reported by the mail store.</p>
<p>If updates are ignored, signals such as rowInserted and dataChanged will not be emitted; instead, the modelReset signal will be emitted when the model is later changed to stop ignoring mail store updates, and detailed change information will not be accessible.</p>
<p>See also <a href="qmailmessagemodelbase.html#ignoreMailStoreUpdates">ignoreMailStoreUpdates</a>().</p>
<h3 class="fn"><a name="setKey"></a>void QMailMessageModelBase::setKey ( const <a href="qmailmessagekey.html">QMailMessageKey</a> &amp; <i>key</i> )</h3>
<p>Sets the <a href="qmailmessagekey.html">QMailMessageKey</a> used to populate the contents of the model to <i>key</i>. If the key is empty, the model is populated with all the messages from the database.</p>
<p>See also <a href="qmailmessagemodelbase.html#key">key</a>() and <a href="qmailmessagemodelbase.html#modelChanged">modelChanged</a>().</p>
<h3 class="fn"><a name="setSortKey"></a>void QMailMessageModelBase::setSortKey ( const <a href="qmailmessagesortkey.html">QMailMessageSortKey</a> &amp; <i>sortKey</i> )</h3>
<p>Sets the <a href="qmailmessagesortkey.html">QMailMessageSortKey</a> used to sort the contents of the model to <i>sortKey</i>. If the sort key is invalid, no sorting is applied to the model contents and messages are displayed in the order in which they were added into the database.</p>
<p>See also <a href="qmailmessagemodelbase.html#sortKey">sortKey</a>() and <a href="qmailmessagemodelbase.html#modelChanged">modelChanged</a>().</p>
<h3 class="fn"><a name="sortKey"></a><a href="qmailmessagesortkey.html">QMailMessageSortKey</a> QMailMessageModelBase::sortKey () const</h3>
<p>Returns the <a href="qmailmessagesortkey.html">QMailMessageSortKey</a> used to sort the contents of the model.</p>
<p>See also <a href="qmailmessagemodelbase.html#setSortKey">setSortKey</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2010 QtSoftware</td>
<td align="right"><div align="right">Messaging Framework</div></td>
</tr></table></div></address></body>
</html>
